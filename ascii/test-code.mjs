import ansiEscapes from 'ansi-escapes';
import chalk from 'chalk';
import inquirer from 'inquirer';

// Predefined color choices
const colorOptions = [
  { name: 'Red', color: chalk.rgb(255, 0, 0) },
  { name: 'Green', color: chalk.rgb(0, 255, 0) },
  { name: 'Blue', color: chalk.rgb(0, 0, 255) },
  { name: 'Cyan', color: chalk.rgb(0, 255, 255) },
  { name: 'Yellow', color: chalk.rgb(255, 255, 0) },
  { name: 'Magenta', color: chalk.rgb(255, 0, 255) }
];

// Function to clear the screen
function clearScreen() {
  process.stdout.write(ansiEscapes.clearScreen);
}

// Function to display the ASCII animation
function displayAnimation(selectedColor) {
  const frames = [
    selectedColor("  ?????????? ???????? ??????? ??????        ").trim(),
    selectedColor("  ??         ??    ?? ??   ?? ??   ??       ").trim(),
    selectedColor("  ??         ??    ?? ??   ?? ??    ??      ").trim(),
    selectedColor("  ??         ??    ?? ??   ?? ??    ??      ").trim(),
    selectedColor("  ??         ??    ?? ??   ?? ??    ??      ").trim(),
    selectedColor("  ??  ?????? ??    ?? ??   ?? ??    ??      ").trim(),
    selectedColor("  ??  ??  ?? ??    ?? ??   ?? ??    ??      ").trim(),
    selectedColor("  ??      ?? ??    ?? ??   ?? ??   ??       ").trim(),
    selectedColor("  ?????????? ???????? ??????? ??????        ").trim(),
    "\n",
    selectedColor("  ?????????? ??      ?? ????????           ").trim(),
    selectedColor("  ??      ?? ??      ?? ??                 ").trim(),
    selectedColor("  ??      ?? ??      ?? ??                 ").trim(),
    selectedColor("  ??      ?? ??      ?? ??                 ").trim(),
    selectedColor("  ?????????? ?????????? ????????           ").trim(),
    selectedColor("  ??      ??         ?? ??                 ").trim(),
    selectedColor("  ??      ??         ?? ??                 ").trim(),
    selectedColor("  ??      ??         ?? ??                 ").trim(),
    selectedColor("  ?????????? ?????????? ????????           ").trim()
  ];

  let frameIndex = 0;

  const interval = setInterval(() => {
    clearScreen();
    process.stdout.write(frames[frameIndex] + "\n");
    frameIndex++;

    if (frameIndex === frames.length) {
      clearInterval(interval);
    }
  }, 100); // Adjust the frame interval time (100 ms)
}

// Inquirer prompt to select color
inquirer
  .prompt([
    {
      type: 'list',
      name: 'color',
      message: 'Pick a color for the animation:',
      choices: colorOptions.map(opt => opt.name)
    }
  ])
  .then(answers => {
    const selectedColor = colorOptions.find(opt => opt.name === answers.color).color;
    console.log(`You selected: ${answers.color}`);
    setTimeout(() => displayAnimation(selectedColor), 1000); // Delay before starting the animation
  })
  .catch(error => {
    console.error('Error:', error);
  });
